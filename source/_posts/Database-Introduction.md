---
title: 数据库—概述
date: 2019-01-13 19:35:04
tags: 数据库
description: 数据库基本概念
img: https://s2.ax1x.com/2019/02/16/ksD91S.png
---

# 数据库系统概述
## 数据库4个基本概念
- 数据
- 数据库
- 数据库管理系统
- 数据库系统

### 数据（data）
数据（data）是数据库中存储的基本对象。
定义：描述事物的符号记录。
种类：数字、文字、图形、图像、音频、视频、学生的档案记录、订单情况等等。
数据的含义称为数据的语义， 数据与其语义是不可分的。
```
例如 93是一个数据
语义1：学生某门课的成绩
语义2：某人的体重
语义3：计算机系2014级学生人数
```
### 数据库（DB）
数据库（Database，DB）：是长期储存在计算机内、 有组织的、 可共享的大量数据的集合。

为什么要建立数据库？
收集并抽取出一个应用所需要的大量数据， 将其保存， 以供进一步加工处理，抽取有用信息， 转换为有价值的知识。

数据库的基本特征：
- 数据按一定的数据模型组织、 描述和储存
- 可为各种用户共享、冗余度较小、易扩展
- 数据独立性较高

### 数据库管理系统（DBMS）
什么是数据库管理系统（DBMS）：
- 位于用户应用与操作系统之间的一层数据管理软件。
- 是基础软件，是一个大型复杂的软件系统。

数据库管理系统的用途：
科学地组织和存储数据、 高效地获取和维护数据

主要功能：
- 数据定义功能
- 数据组织、存储和管理
- 数据操纵功能
- 数据库的事务管理和运行管理
- 数据库的建立和维护功能

### 数据库系统（DBS）
数据库系统（Database System， 简称DBS）
- 是指在计算机系统中引入数据库后的系统构成。
- 在不引起混淆的情况下常常把数据库系统简称为数据库。

数据库系统的构成
- 数据库
- 数据库管理系统（及其应用开发工具）
- 应用程序
- 数据库管理员（DataBase Administrator， DBA）

## 数据库系统的特点
- 数据结构化
- 数据的共享性高，冗余度低且易扩充
- 数据独立性高
- 数据由数据库管理系统统一管理和控制

### 数据结构化
**数据的整体结构化**是数据库的主要特征之一：
- 不再仅仅针对某一个应用，而是面向整个企业或组织
- 不仅数据内部结构化，整体是结构化的，数据之间具有联系
- 数据记录可以变长
- 数据的最小存取单位是数据项

 数据用**数据模型**描述， 无需应用程序定义。

### 数据的共享性高，冗余度低且易扩充
数据面向整个系统，可以被多个用户、多个应用共享使用。
数据共享的好处：
- 减少数据冗余，节约存储空间
- 避免数据之间的不相容性与不一致性
- 使系统易于扩充

### 数据独立性高
- 物理独立性
指用户的应用程序与数据库中数据的物理存储是相互独立的。当数据的物理存储改变了，应用程序不用改变。
- 逻辑独立性
指用户的应用程序与数据库的逻辑结构是相互独立的。数据的逻辑结构改变了，应用程序不用改变。

数据独立性由数据库管理系统的二级映像功能来保证。

### 数据由数据库管理系统统一管理和控制
数据库管理系统提供的数据控制功能：
- 数据的安全性（Security） 保护
保护数据以防止不合法的使用造成的数据的泄密和破坏。
- 数据的完整性（Integrity） 检查
保证数据的正确性、 有效性和相容性。
- 并发控制（Concurrency Control）
对多用户的并发操作加以控制和协调， 防止相互干扰而得到错误的结果。
- 数据库恢复（Recovery）
将数据库从错误状态恢复到某一已知的正确状态。

## 数据库用户
### 最终用户
交互式用户
### 临时用户
用SQL访问DBMS的用户。
交互式查询，也叫即席查询，是实现一些迫切需求时配制的查询。
### 初级用户
通过菜单访问的用户，而不必编写SQL语句。
### 应用程序员
编写菜单程序的程序员
### 数据库管理员（DBA）
管理DBMS的专家

---
# 数据库系统的结构
从数据库应用开发人员角度看，数据库系统采用**三级模式**结构，是数据库系统内部的系统结构。
[![5dtRUH.png](https://s1.ax2x.com/2019/01/13/5dtRUH.png)](https://imgse.com/i/5dtRUH)

## 三级模式结构
- 模式 Schema
- 外模式 External Schema
- 内模式 Internal Schema



### 模式
也叫逻辑模式。是数据库中全体数据的逻辑结构和特征的描述。
所有用户的公共数据视图。

一般， 某个应用的数据库有一个模式。
模式是数据库系统模式结构的中心。

定义模式
- DDL定义数据的逻辑结构，以某种数据模型为基础
数据记录由哪些数据项构成，数据项的名字、类型、取值范围等
- 定义数据之间的联系
- 定义与数据有关的安全性、完整性要求

### 外模式
是数据库用户使用的**局部**数据的逻辑结构和特征的描述。
数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。

外模式与模式的关系
- 外模式通常是模式的子集、 一个模式可以有多个外模式反映了不同的用户的应用需求、 看待数据的方式、 对数据保密的要求
- 对模式中某一数据， 在不同的外模式中 结构、 类型、 长度、 保密级别等都可以不同
外模式与应用的关系
- 一个外模式可以为**多个**应用系统所使用， 一个应用程序只能使用一个外模式
外模式的用途
- 每个用户只能看见和访问所对应的外模式中的数据， 简化用户视图
- 保证数据库安全性的一个有力措施

### 内模式
也称存储模式
- 是数据物理结构和存储方式的描述
- 是数据在数据库内部的表示方式
  - 记录的存储方式
  （例如， 顺序存储， 堆存储， Cluste按hash方法存储等）
  - 索引的组织方式（B+树， Bitmap， Hash）
  - 数据是否压缩存储
  - 数据是否加密
  - 数据存储记录结构的规定—如定长/变长， 记录是否可以跨页存放等

一个数据库只有**一个内模式**。

## 数据库的二级映像（mapping）功能与数据独立性
数据库管理系统内部提供二级映像：
- 外模式／模式映像
- 模式／内模式映像

### 外模式／模式映像
对每一个外模式，有一个外模式／模式映像。
定义外模式与模式之间的对应关系。映像定义通常包含在各外模式的描述中。

**保证数据的逻辑独立性**
- 当模式改变时，数据库管理员对外模式／模式映像作相应改变，使**外模式保持不变**。
- 应用程序是依据数据的外模式编写的， 应用程序不必修改，保证了数据与程序的逻辑独立性，简称数据的**逻辑独立性**

### 模式／内模式映像
定义了数据全局逻辑结构与存储结构之间的对应关系。如，说明某个逻辑记录对应何种存储结构。

数据库中模式／内模式映象是**唯一**的。该映象定义通常包含在模式描述中。

**保证数据的物理独立性**
- 当数据库的存储结构改变了（例如选用了另一种存储结构），数据库管理员修改模式／内模式映象，使模式保持不变。
- 模式不变，则应用程序不变。保证了数据与程序的物理独立性， 简称数据的**物理独立性**

数据库的二级映像功能的作用：
- 保证了应用程序的稳定性
除非应用需求本身发生变化，否则应用程序一般不需要修改。
- 从程序为中心——发展为**以数据为中心**
具有了数据与程序之间的独立性，使得数据的定义和描述可以从应用程序中分离出去。
- 数据的存取由数据库管理系统管理
简化了应用程序的编制。大大减少了应用程序的维护和修改。

---
# 数据库系统的组成
从**不同于前面4个概念的角度**来说
- 硬件平台及数据库
- 软件
- 人员

## 硬件平台及数据库
数据库系统对硬件资源的要求：
- 足够大的内存；
- 足够的大的磁盘或磁盘阵列等外部设备；
- 较高的通道能力，提高数据传送率。

## 软件
- **数据库管理系统**
- 支持数据库管理系统运行的操作系统
- 与数据库接口的高级语言及其编译系统
- 以数据库管理系统为核心的**应用开发工具**
- 为特定应用环境开发的**数据库应用系统**

## 人员
- 数据库管理员（DBA）
- 系统分析员和数据库设计人员
- 应用程序员
- 最终用户

### 数据库管理员（DBA）
- 参与确定数据库中的信息内容和结构
- 参与数据库的存储结构和存取策略的设计
- 参与确定数据安全性要求和完整性约束条件
- 监控数据库的使用和运行
- 数据库的改进和重组

### 系统分析员和数据库设计人员
系统分析员
- 负责应用系统的需求分析和规范说明
- 与用户及数据库管理员结合，确定系统的硬软件配置
- 参与数据库系统的概要设计

数据库设计人员
- 参加用户需求调查和系统分析
- 确定数据库中的数据
- 设计数据库各级模式

### 应用程序员
- 设计和编写应用系统的程序模块
- 进行调试和安装

### 最终用户
用户是指最终用户（End User）。他们通过应用系统的用户接口使用数据库。
1. 偶然用户
   - 不经常访问数据库， 但每次访问数据库时往往需要不同的数据库信息
   - 企业或组织机构的高中级管理人员
2. 简单用户
   - 主要工作是查询和更新数据库
   - 银行的职员、 机票预定人员、 旅馆总台服务员
3. 复杂用户
   - 工程师、 科学家、 经济学家、 科技工作者等
   - 直接使用数据库语言访问数据库， 甚至能够基于数据库管理系统的应用程序接口编制自己的应用程序
---
# 数据模型
数据模型是对现实世界数据特征的抽象。通俗地讲数据模型就是现实世界的模拟。
数据模型是数据库系统的核心和基础。

## 两大类数据模型
数据模型分为两类（两个不同的层次）
- **概念模型**，也称信息模型
它是按用户的观点来对数据和信息建模，用于数据库设计。
- **逻辑模型和物理模型**
-- 逻辑模型主要包括网状模型、层次模型、关系模型、面向对象数据模型、对象关系数据模型、半结构化数据模型等。
按计算机系统的观点对数据建模， 用于DBMS实现。
-- 物理模型是对数据最底层的抽象
描述数据在系统内（磁盘上）的表示方式和存取方法。

## 信息世界中的基本概念
- 实体（Entity）
客观存在并可相互区别的事物称为实体。
可以是具体的人、 事、 物或抽象的概念。
- 属性（Attribute）
实体所具有的某一特性称为属性。 一个实体可以由若干个属性来刻画。
- 码（Key）
唯一标识实体的属性集称为码。
- 实体型（Entity Type）
用实体名及其属性名集合来抽象和刻画同类实体称为实体型。
- 实体集（Entity Set）
同一类型实体的集合称为实体集。
- 联系（Relationship）
现实世界中事物内部以及事物之间的联系在信息世界中反映为实体（型）内部的联系和实体（型） 之间的联系。

实体内部的联系: 是指组成实体的各属性之间的联系。
实体之间的联系: 通常是指不同实体集之间的联系。
实体之间的联系有**一对一（1:1） 、 一对多（1:n） 和多对多（m:n）**等多种类型。

概念模型的一种表示方法：实体-联系方法（Entity-Relationship Approach）。也称为**E-R模型**。

## 数据模型的组成要素
数据模型是严格定义的一组概念的集合，精确地描述了系统的静态特性、动态特性和完整性约束条件(Integrity Constraints)。

数据模型由三部分组成：
- 数据结构——描述系统的静态特性
- 数据操作——描述系统的动态特性
- 完整性约束

### 数据结构
- 刻画数据模型性质的重要方面。
根据数据结构的类型来命名数据模型，层次结构-层次模型、 网状结构--网状模型、 关系结构—关系模型。
- 描述数据库的组成对象--对象的类型、 内容、 性质。
- 描述对象之间的联系。

### 数据操作
对数据库中各种对象的实例允许执行的操作的集合，包括操作及有关的操作规则。

数据操作的类型：
- 查询
- 更新（插入、删除、修改）

### 数据的完整性约束
是一组完整性规则的集合：
- 完整性规则：给定的数据模型中数据及其联系所具有的**制约和依存规则**。
- 用以限定符合数据模型的数据库状态以及状态的变化，以保证数据的**正确、有效和相容**。

数据模型对完整性约束条件的定义：
- 反映和规定必须遵守的**基本的通用的**完整性约束条件。
- 提供定义完整性约束条件的机制，以反映**具体应用**所涉及的数据必须遵守的**特定的语义约束条件**。（如课程数据库中成绩score不能超过100）

## 常用的数据模型
- 层次模型（Hierarchical Model）
- 网状模型（Network Model）
- 关系模型（Relational Model)）
- 面向对象数据模型（Object Oriented Data Model）
- 对象关系数据模型（Object Relational Data Model）
- 半结构化数据模型（Semi-struture Data Model）—如XML
- 非结构化数据模型、图模型……

## 层次模型
用树形结构来表示各类实体以及实体间的联系。

表示方法：
- 实体型：用记录类型描述
每个结点表示一个记录类型（实体）
- 属性：用字段描述
每个记录类型可包含若干个字段
- 联系：用结点之间的连线表示记录类型（实体）之间的一对多的父子联系。
层次模型的定义：满足以下条件的基本层次结构的集合，
- 有且只有一个结点没有双亲结点， 这个结点称为根结点。
- 根以外的其它结点有且只有一个双亲结点。
  
[![5dtggN.jpg](https://s1.ax2x.com/2019/01/13/5dtggN.jpg)](https://imgse.com/i/5dtggN)

## 网状模型
采用网状结构来表示各类实体以及实体间的联系。
表示方法：（与层次数据模型相同）
网状模型的定义：满足下面两个条件的基本层次联系的集合：
-  允许一个以上的结点无双亲
- 一个结点可以有多于一个的双亲

## 关系模型
### 关系模型的数据结构
- 关系（Relation） —— 一个关系对应通常说的一张表
- 元组（Tuple） —— 表中的一行即为一个元组
- 属性（ Attribute） ——表中的一列即为一个属性， 给每一个属性起一个名称即属性名
- 主码（Key） ——也称码键。 表中的某个属性组， 它可以唯一确定一个元组
- 域（Domain） ——是一组具有相同数据类型的值的集合。属性的取值范围来自某个域。
例：学生年龄属性的域（15～45岁），性别的域是（男， 女） ，
系名的域是一个学校所有系名的集合；
- 分量——元组中的一个属性值。
- 关系模式——对关系的描述
关系名（属性1，属性2， …，属性n）
学生（学号， 姓名，年龄，性别，系名，年级）

关系必须是**规范化**的，满足一定的规范条件。
最基本的规范条件：关系的每一个分量必须是一个**不可分**的数据项， 不允许表中还有表。 

关系术语|一般表格的术语
:---:|:---:
关系名|表名
关系模式|表头（表格的描述）
关系|（一张）二维表
元组|记录或行
属性|列
属性名|列名
属性值|列值
分量|一条记录中的一个列值
非规范关系|表中有表（大表中嵌有小表)

### 关系模型的操纵与完整性约束
数据操作：操作对象和操作结果都是关系
- 查询
- 插入
- 删除
- 更新

关系的完整性约束条件：（前两个是关系的不变性）
- 实体完整性
- 参照完整性
- 用户定义的完整性
